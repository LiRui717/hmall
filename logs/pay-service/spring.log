09:28:50:551  INFO 12452 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 12452 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
09:28:50:562 DEBUG 12452 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
09:28:50:563  INFO 12452 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
09:28:52:823  INFO 12452 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
09:28:52:828  INFO 12452 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
09:28:52:875  INFO 12452 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
09:28:53:597  INFO 12452 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=93994f01-99a7-3ea8-acd7-1f6e9589b9eb
09:28:54:851  INFO 12452 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
09:28:54:873  INFO 12452 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
09:28:54:873  INFO 12452 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
09:28:55:255  INFO 12452 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
09:28:55:256  INFO 12452 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4589 ms
09:28:56:095  INFO 12452 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
09:28:56:831  INFO 12452 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
09:29:00:014  INFO 12452 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
09:29:01:520  INFO 12452 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
09:29:04:530  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of d45edb33-3df9-4adc-bb44-583ce9711249
09:29:04:651  INFO 12452 --- [main] org.reflections.Reflections              : Reflections took 68 ms to scan 1 urls, producing 3 keys and 6 values 
09:29:04:729  INFO 12452 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 4 keys and 9 values 
09:29:04:765  INFO 12452 --- [main] org.reflections.Reflections              : Reflections took 27 ms to scan 1 urls, producing 3 keys and 10 values 
09:29:04:775  WARN 12452 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
09:29:04:802  INFO 12452 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 1 keys and 5 values 
09:29:04:838  INFO 12452 --- [main] org.reflections.Reflections              : Reflections took 29 ms to scan 1 urls, producing 1 keys and 7 values 
09:29:04:873  INFO 12452 --- [main] org.reflections.Reflections              : Reflections took 26 ms to scan 1 urls, producing 2 keys and 8 values 
09:29:04:880  WARN 12452 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
09:29:04:883  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] RpcClient init label, labels = {module=naming, source=sdk}
09:29:04:888  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
09:29:04:889  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
09:29:04:891  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
09:29:04:895  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
09:29:08:866  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740101359417_10.35.140.159_49964
09:29:08:870  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
09:29:08:870  INFO 12452 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Notify connected event to listeners.
09:29:08:874  INFO 12452 --- [main] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1235/0x0000000100872440
09:29:09:039  INFO 12452 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
09:29:09:090  INFO 12452 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
09:29:09:700  INFO 12452 --- [nacos-grpc-client-executor-8] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Receive server push request, request = NotifySubscriberRequest, requestId = 635
09:29:09:712  INFO 12452 --- [nacos-grpc-client-executor-8] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Ack server push request, request = NotifySubscriberRequest, requestId = 635
09:29:09:717  INFO 12452 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
09:29:09:729  INFO 12452 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
09:29:09:782  INFO 12452 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
09:29:10:005  INFO 12452 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 21.368 seconds (JVM running for 23.306)
09:32:33:361  INFO 12452 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
09:32:33:361  INFO 12452 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
09:32:33:372  INFO 12452 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 11 ms
09:32:34:279  INFO 12452 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
09:32:34:988  INFO 12452 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
09:32:35:009 DEBUG 12452 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
09:32:35:069 DEBUG 12452 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892749211961634817(Long)
09:32:35:114 DEBUG 12452 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
09:32:35:235 DEBUG 12452 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
09:32:35:239 DEBUG 12452 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892749223969865729(Long), 1892749211961634817(Long), 1892749223936311297(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T11:32:35.223632400(LocalDateTime)
09:32:35:248 DEBUG 12452 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
09:32:44:118 DEBUG 12452 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
09:32:44:118 DEBUG 12452 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892749211961634817(Long)
09:32:44:149 DEBUG 12452 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 1
09:32:47:999 DEBUG 12452 --- [http-nio-8084-exec-4] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
09:32:47:999 DEBUG 12452 --- [http-nio-8084-exec-4] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892749223969865729(Long)
09:32:48:003 DEBUG 12452 --- [http-nio-8084-exec-4] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
09:32:48:027 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
09:32:48:027 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
09:32:48:027 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
09:32:48:710 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 500  (682ms)
09:32:48:710 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: close
09:32:48:710 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-type: application/json
09:32:48:710 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 01:32:48 GMT
09:32:48:710 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] transfer-encoding: chunked
09:32:48:710 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
09:32:48:718 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] {"timestamp":"2025-02-21T01:32:48.665+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}
09:32:48:718 DEBUG 12452 --- [http-nio-8084-exec-4] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (119-byte body)
09:32:48:776 ERROR 12452 --- [http-nio-8084-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T01:32:48.665+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]] with root cause

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T01:32:48.665+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy123.deductMoney(Unknown Source) ~[na:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:63) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$dbe4f6f3.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

09:32:48:951  INFO 12452 --- [nacos-grpc-client-executor-64] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Receive server push request, request = NotifySubscriberRequest, requestId = 647
09:32:48:951  INFO 12452 --- [nacos-grpc-client-executor-64] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Ack server push request, request = NotifySubscriberRequest, requestId = 647
09:35:23:904  INFO 12452 --- [nacos-grpc-client-executor-100] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Receive server push request, request = NotifySubscriberRequest, requestId = 648
09:35:23:906  INFO 12452 --- [nacos-grpc-client-executor-100] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Ack server push request, request = NotifySubscriberRequest, requestId = 648
09:35:38:927  INFO 12452 --- [nacos-grpc-client-executor-103] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Receive server push request, request = NotifySubscriberRequest, requestId = 651
09:35:38:931  INFO 12452 --- [nacos-grpc-client-executor-103] com.alibaba.nacos.common.remote.client   : [d45edb33-3df9-4adc-bb44-583ce9711249] Ack server push request, request = NotifySubscriberRequest, requestId = 651
09:36:32:705 DEBUG 12452 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
09:36:32:706 DEBUG 12452 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892750218628149249(Long)
09:36:32:711 DEBUG 12452 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
09:36:32:712 DEBUG 12452 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
09:36:32:713 DEBUG 12452 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892750219987042307(Long), 1892750218628149249(Long), 1892750219987042306(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T11:36:32.711562(LocalDateTime)
09:36:32:722 DEBUG 12452 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
09:36:54:412 DEBUG 12452 --- [http-nio-8084-exec-8] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
09:36:54:413 DEBUG 12452 --- [http-nio-8084-exec-8] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892750219987042307(Long)
09:36:54:427 DEBUG 12452 --- [http-nio-8084-exec-8] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
09:36:54:429 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
09:36:54:429 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
09:36:54:429 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 500  (18ms)
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: close
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-type: application/json
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 01:36:54 GMT
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] transfer-encoding: chunked
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] {"timestamp":"2025-02-21T01:36:54.447+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}
09:36:54:448 DEBUG 12452 --- [http-nio-8084-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (119-byte body)
09:36:54:462 ERROR 12452 --- [http-nio-8084-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T01:36:54.447+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]] with root cause

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T01:36:54.447+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy123.deductMoney(Unknown Source) ~[na:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:63) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$dbe4f6f3.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

09:38:17:234  WARN 12452 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
09:38:17:236  WARN 12452 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
09:38:17:242  WARN 12452 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
09:38:17:240  WARN 12452 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
09:38:17:762  INFO 12452 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
09:38:17:769  INFO 12452 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
09:38:18:097  INFO 12452 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
09:38:18:098  INFO 12452 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1c97aa0a[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
09:38:18:098  INFO 12452 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740101359417_10.35.140.159_49964
09:38:18:103  INFO 12452 --- [nacos-grpc-client-executor-138] c.a.n.c.remote.client.grpc.GrpcClient    : [1740101359417_10.35.140.159_49964]Ignore complete event,isRunning:false,isAbandon=false
09:38:18:110  INFO 12452 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7f88753c[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 139]
09:38:18:122  INFO 12452 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
09:38:18:158  INFO 12452 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
10:49:34:542  INFO 12580 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 12580 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
10:49:34:547 DEBUG 12580 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
10:49:34:548  INFO 12580 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
10:49:37:106  INFO 12580 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
10:49:37:110  INFO 12580 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
10:49:37:166  INFO 12580 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
10:49:37:947  INFO 12580 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=93994f01-99a7-3ea8-acd7-1f6e9589b9eb
10:49:38:971  INFO 12580 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
10:49:38:993  INFO 12580 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
10:49:38:994  INFO 12580 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
10:49:39:280  INFO 12580 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
10:49:39:280  INFO 12580 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4573 ms
10:49:39:913  INFO 12580 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
10:49:40:386  INFO 12580 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
10:49:42:285  INFO 12580 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
10:49:43:179  INFO 12580 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
10:49:45:709  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 541ffa40-f961-43f1-9f0e-7329bc5dedb9
10:49:45:845  INFO 12580 --- [main] org.reflections.Reflections              : Reflections took 57 ms to scan 1 urls, producing 3 keys and 6 values 
10:49:45:906  INFO 12580 --- [main] org.reflections.Reflections              : Reflections took 19 ms to scan 1 urls, producing 4 keys and 9 values 
10:49:45:930  INFO 12580 --- [main] org.reflections.Reflections              : Reflections took 15 ms to scan 1 urls, producing 3 keys and 10 values 
10:49:45:938  WARN 12580 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
10:49:45:956  INFO 12580 --- [main] org.reflections.Reflections              : Reflections took 17 ms to scan 1 urls, producing 1 keys and 5 values 
10:49:45:980  INFO 12580 --- [main] org.reflections.Reflections              : Reflections took 18 ms to scan 1 urls, producing 1 keys and 7 values 
10:49:46:001  INFO 12580 --- [main] org.reflections.Reflections              : Reflections took 16 ms to scan 1 urls, producing 2 keys and 8 values 
10:49:46:008  WARN 12580 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
10:49:46:010  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] RpcClient init label, labels = {module=naming, source=sdk}
10:49:46:015  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
10:49:46:015  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
10:49:46:016  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
10:49:46:019  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
10:49:48:178  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740106198887_10.35.140.159_51947
10:49:48:181  INFO 12580 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Notify connected event to listeners.
10:49:48:184  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
10:49:48:186  INFO 12580 --- [main] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1234/0x000000010087c040
10:49:48:307  INFO 12580 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
10:49:48:479  INFO 12580 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
10:49:48:828  INFO 12580 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 661
10:49:48:831  INFO 12580 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 661
10:49:48:864  INFO 12580 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
10:49:48:867  INFO 12580 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
10:49:48:893  INFO 12580 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
10:49:49:013  INFO 12580 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 16.111 seconds (JVM running for 17.834)
10:51:50:494  INFO 12580 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
10:51:50:495  INFO 12580 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
10:51:50:502  INFO 12580 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
10:51:51:058  INFO 12580 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
10:51:51:535  INFO 12580 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
10:51:51:551 DEBUG 12580 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
10:51:51:610 DEBUG 12580 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892769165507186689(Long)
10:51:51:656 DEBUG 12580 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
10:51:51:767 DEBUG 12580 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
10:51:51:771 DEBUG 12580 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892769174298460161(Long), 1892769165507186689(Long), 1892769174285877250(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T12:51:51.753867500(LocalDateTime)
10:51:51:784 DEBUG 12580 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
10:52:20:793 DEBUG 12580 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
10:52:20:794 DEBUG 12580 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892769174298460161(Long)
10:52:20:808 DEBUG 12580 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
10:52:20:819 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
10:52:20:819 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
10:52:20:820 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
10:52:21:245 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 500  (424ms)
10:52:21:245 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: close
10:52:21:245 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-type: application/json
10:52:21:245 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 02:52:21 GMT
10:52:21:246 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] transfer-encoding: chunked
10:52:21:246 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
10:52:21:248 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] {"timestamp":"2025-02-21T02:52:21.212+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}
10:52:21:248 DEBUG 12580 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (119-byte body)
10:52:21:290 ERROR 12580 --- [http-nio-8084-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T02:52:21.212+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]] with root cause

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T02:52:21.212+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy123.deductMoney(Unknown Source) ~[na:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:63) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

10:52:21:552  INFO 12580 --- [nacos-grpc-client-executor-52] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 673
10:52:21:553  INFO 12580 --- [nacos-grpc-client-executor-52] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 673
10:57:04:383 DEBUG 12580 --- [http-nio-8084-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
10:57:04:384 DEBUG 12580 --- [http-nio-8084-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892769174298460161(Long)
10:57:04:391 DEBUG 12580 --- [http-nio-8084-exec-3] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
10:57:04:393 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
10:57:04:393 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
10:57:04:393 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
10:57:04:424 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 500  (30ms)
10:57:04:424 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: close
10:57:04:425 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-type: application/json
10:57:04:425 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 02:57:04 GMT
10:57:04:425 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] transfer-encoding: chunked
10:57:04:425 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
10:57:04:425 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] {"timestamp":"2025-02-21T02:57:04.422+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}
10:57:04:426 DEBUG 12580 --- [http-nio-8084-exec-3] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (119-byte body)
10:57:04:432 ERROR 12580 --- [http-nio-8084-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T02:57:04.422+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]] with root cause

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T02:57:04.422+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy123.deductMoney(Unknown Source) ~[na:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:63) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

11:06:48:683  INFO 12580 --- [nacos-grpc-client-executor-255] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 677
11:06:48:686  INFO 12580 --- [nacos-grpc-client-executor-255] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 677
11:07:08:301  INFO 12580 --- [nacos-grpc-client-executor-260] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 679
11:07:08:309  INFO 12580 --- [nacos-grpc-client-executor-260] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 679
11:07:27:267 DEBUG 12580 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
11:07:27:268 DEBUG 12580 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892773092919234562(Long)
11:07:27:273 DEBUG 12580 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
11:07:27:305 DEBUG 12580 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
11:07:27:315 DEBUG 12580 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892773098237624322(Long), 1892773092919234562(Long), 1892773098237624321(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T13:07:27.294686200(LocalDateTime)
11:07:27:325 DEBUG 12580 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
11:07:58:844 DEBUG 12580 --- [http-nio-8084-exec-5] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
11:07:58:845 DEBUG 12580 --- [http-nio-8084-exec-5] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892773098237624322(Long)
11:07:58:853 DEBUG 12580 --- [http-nio-8084-exec-5] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
11:07:58:855 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
11:07:58:856 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
11:07:58:856 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
11:07:58:900 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 500  (44ms)
11:07:58:901 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: close
11:07:58:901 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-type: application/json
11:07:58:901 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 03:07:58 GMT
11:07:58:902 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] transfer-encoding: chunked
11:07:58:902 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
11:07:58:902 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] {"timestamp":"2025-02-21T03:07:58.893+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}
11:07:58:902 DEBUG 12580 --- [http-nio-8084-exec-5] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (119-byte body)
11:07:58:909 ERROR 12580 --- [http-nio-8084-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T03:07:58.893+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]] with root cause

feign.FeignException$InternalServerError: [500 ] during [PUT] to [http://user-service/users/money/deduct?pw=123&amount=224900] [UserClient#deductMoney(String,Integer)]: [{"timestamp":"2025-02-21T03:07:58.893+00:00","status":500,"error":"Internal Server Error","path":"/users/money/deduct"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy123.deductMoney(Unknown Source) ~[na:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:63) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

11:11:15:946  INFO 12580 --- [nacos-grpc-client-executor-312] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 683
11:11:15:948  INFO 12580 --- [nacos-grpc-client-executor-312] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 683
11:11:32:162  INFO 12580 --- [nacos-grpc-client-executor-315] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 685
11:11:32:165  INFO 12580 --- [nacos-grpc-client-executor-315] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 685
11:11:39:900 DEBUG 12580 --- [http-nio-8084-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
11:11:39:902 DEBUG 12580 --- [http-nio-8084-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892773098237624322(Long)
11:11:39:922 DEBUG 12580 --- [http-nio-8084-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
11:11:39:925 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
11:11:39:925 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
11:11:39:925 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
11:11:41:053 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (1126ms)
11:11:41:054 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
11:11:41:054 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
11:11:41:054 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 03:11:40 GMT
11:11:41:054 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
11:11:41:056 DEBUG 12580 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
11:11:41:234 DEBUG 12580 --- [http-nio-8084-exec-6] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
11:11:41:257 DEBUG 12580 --- [http-nio-8084-exec-6] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2025-02-21T11:11:41.059291300(LocalDateTime), 1892773098237624322(Long), 0(Integer), 1(Integer)
11:11:41:263 DEBUG 12580 --- [http-nio-8084-exec-6] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
11:11:41:398  INFO 12580 --- [http-nio-8084-exec-6] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.150.101:5672]
11:11:58:397 DEBUG 12580 --- [http-nio-8084-exec-7] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
11:11:58:400 DEBUG 12580 --- [http-nio-8084-exec-7] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892773098237624322(Long)
11:11:58:405 DEBUG 12580 --- [http-nio-8084-exec-7] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
11:11:58:407 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
11:11:58:407 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
11:11:58:407 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
11:11:58:688 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (279ms)
11:11:58:688 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
11:11:58:688 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
11:11:58:688 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 03:11:58 GMT
11:11:58:688 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
11:11:58:688 DEBUG 12580 --- [http-nio-8084-exec-7] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
11:11:58:696 DEBUG 12580 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
11:11:58:698 DEBUG 12580 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2025-02-21T11:11:58.688429(LocalDateTime), 1892773098237624322(Long), 0(Integer), 1(Integer)
11:12:02:544 ERROR 12580 --- [http-nio-8084-exec-6] c.h.p.service.Impl.PayOrderServiceImpl   : 支付成功的消息发送失败，支付单id：1892773098237624322， 交易单id：1892773092919234562

org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection timed out: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:61) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:252) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2210) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1102) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1167) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1160) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:72) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.base/java.net.PlainSocketImpl.waitForConnect(Native Method) ~[na:na]
	at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:107) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:412) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:255) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:237) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:608) ~[na:na]
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60) ~[amqp-client-5.14.2.jar:5.14.2]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223) ~[amqp-client-5.14.2.jar:5.14.2]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173) ~[amqp-client-5.14.2.jar:5.14.2]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566) ~[spring-rabbit-2.4.12.jar:2.4.12]
	... 71 common frames omitted

11:12:02:576 DEBUG 12580 --- [http-nio-8084-exec-7] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 0
11:12:02:599 ERROR 12580 --- [http-nio-8084-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.hmall.common.exception.BizIllegalException: 交易已支付或关闭！] with root cause

com.hmall.common.exception.BizIllegalException: 交易已支付或关闭！
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:67) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

11:12:45:175 DEBUG 12580 --- [http-nio-8084-exec-8] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
11:12:45:177 DEBUG 12580 --- [http-nio-8084-exec-8] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892774429501313026(Long)
11:12:45:180 DEBUG 12580 --- [http-nio-8084-exec-8] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
11:12:45:182 DEBUG 12580 --- [http-nio-8084-exec-8] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
11:12:45:183 DEBUG 12580 --- [http-nio-8084-exec-8] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892774431481036802(Long), 1892774429501313026(Long), 1892774431481036801(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T13:12:45.181416400(LocalDateTime)
11:12:45:193 DEBUG 12580 --- [http-nio-8084-exec-8] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
11:12:52:273 DEBUG 12580 --- [http-nio-8084-exec-9] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
11:12:52:275 DEBUG 12580 --- [http-nio-8084-exec-9] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892774431481036802(Long)
11:12:52:283 DEBUG 12580 --- [http-nio-8084-exec-9] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
11:12:52:285 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
11:12:52:285 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
11:12:52:286 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
11:12:52:456 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (169ms)
11:12:52:456 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
11:12:52:456 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
11:12:52:456 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 03:12:52 GMT
11:12:52:456 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
11:12:52:456 DEBUG 12580 --- [http-nio-8084-exec-9] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
11:12:52:463 DEBUG 12580 --- [http-nio-8084-exec-9] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
11:12:52:464 DEBUG 12580 --- [http-nio-8084-exec-9] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2025-02-21T11:12:52.457277800(LocalDateTime), 1892774431481036802(Long), 0(Integer), 1(Integer)
11:12:52:469 DEBUG 12580 --- [http-nio-8084-exec-9] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
11:12:52:471  INFO 12580 --- [http-nio-8084-exec-9] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.150.101:5672]
11:13:13:508 ERROR 12580 --- [http-nio-8084-exec-9] c.h.p.service.Impl.PayOrderServiceImpl   : 支付成功的消息发送失败，支付单id：1892774431481036802， 交易单id：1892774429501313026

org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection timed out: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:61) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:252) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2210) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1102) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1167) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1160) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:72) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.base/java.net.PlainSocketImpl.waitForConnect(Native Method) ~[na:na]
	at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:107) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:412) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:255) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:237) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:608) ~[na:na]
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60) ~[amqp-client-5.14.2.jar:5.14.2]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223) ~[amqp-client-5.14.2.jar:5.14.2]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173) ~[amqp-client-5.14.2.jar:5.14.2]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566) ~[spring-rabbit-2.4.12.jar:2.4.12]
	... 71 common frames omitted

11:13:31:002 DEBUG 12580 --- [http-nio-8084-exec-10] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
11:13:31:006 DEBUG 12580 --- [http-nio-8084-exec-10] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892774431481036802(Long)
11:13:31:014 DEBUG 12580 --- [http-nio-8084-exec-10] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
11:13:31:021 ERROR 12580 --- [http-nio-8084-exec-10] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.hmall.common.exception.BizIllegalException: 交易已支付或关闭！] with root cause

com.hmall.common.exception.BizIllegalException: 交易已支付或关闭！
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:60) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$ef4ee1ca.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

11:16:40:252  WARN 12580 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
11:16:40:253  WARN 12580 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
11:16:40:254  WARN 12580 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
11:16:40:262  WARN 12580 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
11:16:41:158  INFO 12580 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
11:16:41:168  INFO 12580 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
11:16:41:266  INFO 12580 --- [nacos-grpc-client-executor-384] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Receive server push request, request = NotifySubscriberRequest, requestId = 689
11:16:41:268  INFO 12580 --- [nacos-grpc-client-executor-384] com.alibaba.nacos.common.remote.client   : [541ffa40-f961-43f1-9f0e-7329bc5dedb9] Ack server push request, request = NotifySubscriberRequest, requestId = 689
11:16:41:503  INFO 12580 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
11:16:41:503  INFO 12580 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@47a92b5e[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
11:16:41:504  INFO 12580 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740106198887_10.35.140.159_51947
11:16:41:514  INFO 12580 --- [nacos-grpc-client-executor-385] c.a.n.c.remote.client.grpc.GrpcClient    : [1740106198887_10.35.140.159_51947]Ignore complete event,isRunning:false,isAbandon=false
11:16:41:539  INFO 12580 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@43c072c4[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 386]
11:16:41:563  INFO 12580 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
11:16:41:661  INFO 12580 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
11:17:22:155  INFO 6264 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 6264 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
11:17:22:159 DEBUG 6264 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
11:17:22:160  INFO 6264 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
11:17:24:096  INFO 6264 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
11:17:24:100  INFO 6264 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
11:17:24:133  INFO 6264 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
11:17:24:562  INFO 6264 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=93994f01-99a7-3ea8-acd7-1f6e9589b9eb
11:17:25:666  INFO 6264 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
11:17:25:682  INFO 6264 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
11:17:25:683  INFO 6264 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
11:17:26:021  INFO 6264 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
11:17:26:021  INFO 6264 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3761 ms
11:17:26:779  INFO 6264 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
11:17:27:326  INFO 6264 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
11:17:29:926  INFO 6264 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
11:17:31:103  INFO 6264 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
11:17:33:149  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of f75de78d-b5d9-4eb7-b91e-d581120b1e3f
11:17:33:279  INFO 6264 --- [main] org.reflections.Reflections              : Reflections took 81 ms to scan 1 urls, producing 3 keys and 6 values 
11:17:33:375  INFO 6264 --- [main] org.reflections.Reflections              : Reflections took 37 ms to scan 1 urls, producing 4 keys and 9 values 
11:17:33:450  INFO 6264 --- [main] org.reflections.Reflections              : Reflections took 63 ms to scan 1 urls, producing 3 keys and 10 values 
11:17:33:461  WARN 6264 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
11:17:33:491  INFO 6264 --- [main] org.reflections.Reflections              : Reflections took 29 ms to scan 1 urls, producing 1 keys and 5 values 
11:17:33:534  INFO 6264 --- [main] org.reflections.Reflections              : Reflections took 35 ms to scan 1 urls, producing 1 keys and 7 values 
11:17:33:575  INFO 6264 --- [main] org.reflections.Reflections              : Reflections took 30 ms to scan 1 urls, producing 2 keys and 8 values 
11:17:33:584  WARN 6264 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
11:17:33:589  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] RpcClient init label, labels = {module=naming, source=sdk}
11:17:33:597  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
11:17:33:598  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
11:17:33:599  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
11:17:33:606  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
11:17:37:671  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740107868238_10.35.140.159_54289
11:17:37:676  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
11:17:37:674  INFO 6264 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Notify connected event to listeners.
11:17:37:679  INFO 6264 --- [main] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1235/0x000000010087b040
11:17:37:825  INFO 6264 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
11:17:37:852  INFO 6264 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
11:17:38:255  INFO 6264 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Receive server push request, request = NotifySubscriberRequest, requestId = 696
11:17:38:261  INFO 6264 --- [nacos-grpc-client-executor-6] com.alibaba.nacos.common.remote.client   : [f75de78d-b5d9-4eb7-b91e-d581120b1e3f] Ack server push request, request = NotifySubscriberRequest, requestId = 696
11:17:38:528  INFO 6264 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
11:17:38:534  INFO 6264 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
11:17:38:571  INFO 6264 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
11:17:38:832  INFO 6264 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 18.429 seconds (JVM running for 20.111)
11:20:04:372  INFO 6264 --- [http-nio-8084-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
11:20:04:379  INFO 6264 --- [http-nio-8084-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
11:20:04:454  INFO 6264 --- [http-nio-8084-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 73 ms
11:20:05:614  INFO 6264 --- [http-nio-8084-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
11:20:06:240  INFO 6264 --- [http-nio-8084-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
11:20:06:259 DEBUG 6264 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
11:20:06:299 DEBUG 6264 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892776269362110466(Long)
11:20:06:348 DEBUG 6264 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
11:20:06:493 DEBUG 6264 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
11:20:06:501 DEBUG 6264 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892776282502979586(Long), 1892776269362110466(Long), 1892776282469425153(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T13:20:06.471828200(LocalDateTime)
11:20:06:514 DEBUG 6264 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
11:24:07:894  WARN 6264 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
11:24:07:895  WARN 6264 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
11:24:07:902  WARN 6264 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
11:24:07:920  WARN 6264 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
11:24:08:687  INFO 6264 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
11:24:08:697  INFO 6264 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
11:24:09:037  INFO 6264 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
11:24:09:038  INFO 6264 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@429a2d5b[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
11:24:09:039  INFO 6264 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740107868238_10.35.140.159_54289
11:24:09:045  INFO 6264 --- [nacos-grpc-client-executor-103] c.a.n.c.remote.client.grpc.GrpcClient    : [1740107868238_10.35.140.159_54289]Ignore complete event,isRunning:false,isAbandon=false
11:24:09:067  INFO 6264 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@52d688ac[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 104]
11:24:09:085  INFO 6264 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
11:24:09:155  INFO 6264 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
11:24:15:193  INFO 9008 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 9008 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
11:24:15:199 DEBUG 9008 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
11:24:15:200  INFO 9008 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
11:24:16:954  INFO 9008 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
11:24:16:959  INFO 9008 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
11:24:17:001  INFO 9008 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
11:24:17:574  INFO 9008 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=93994f01-99a7-3ea8-acd7-1f6e9589b9eb
11:24:18:481  INFO 9008 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
11:24:18:500  INFO 9008 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
11:24:18:500  INFO 9008 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
11:24:18:720  INFO 9008 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
11:24:18:720  INFO 9008 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3413 ms
11:24:19:519  INFO 9008 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
11:24:20:133  INFO 9008 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
11:24:22:653  INFO 9008 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
11:24:23:799  INFO 9008 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
11:24:25:374  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 45f05a06-446c-45cd-a8f1-caaf04845b57
11:24:25:468  INFO 9008 --- [main] org.reflections.Reflections              : Reflections took 50 ms to scan 1 urls, producing 3 keys and 6 values 
11:24:25:545  INFO 9008 --- [main] org.reflections.Reflections              : Reflections took 26 ms to scan 1 urls, producing 4 keys and 9 values 
11:24:25:570  INFO 9008 --- [main] org.reflections.Reflections              : Reflections took 17 ms to scan 1 urls, producing 3 keys and 10 values 
11:24:25:577  WARN 9008 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
11:24:25:598  INFO 9008 --- [main] org.reflections.Reflections              : Reflections took 20 ms to scan 1 urls, producing 1 keys and 5 values 
11:24:25:623  INFO 9008 --- [main] org.reflections.Reflections              : Reflections took 19 ms to scan 1 urls, producing 1 keys and 7 values 
11:24:25:650  INFO 9008 --- [main] org.reflections.Reflections              : Reflections took 19 ms to scan 1 urls, producing 2 keys and 8 values 
11:24:25:655  WARN 9008 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
11:24:25:658  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] RpcClient init label, labels = {module=naming, source=sdk}
11:24:25:663  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
11:24:25:663  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
11:24:25:665  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
11:24:25:669  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
11:24:28:239  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740108278921_10.35.140.159_55100
11:24:28:240  INFO 9008 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Notify connected event to listeners.
11:24:28:243  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
11:24:28:244  INFO 9008 --- [main] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1234/0x000000010087bc40
11:24:28:338  INFO 9008 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
11:24:28:354  INFO 9008 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
11:24:28:863  INFO 9008 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Receive server push request, request = NotifySubscriberRequest, requestId = 715
11:24:28:869  INFO 9008 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [45f05a06-446c-45cd-a8f1-caaf04845b57] Ack server push request, request = NotifySubscriberRequest, requestId = 715
11:24:28:933  INFO 9008 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
11:24:28:939  INFO 9008 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
11:24:28:979  INFO 9008 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
11:24:29:228  INFO 9008 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 15.787 seconds (JVM running for 17.382)
11:26:46:904  INFO 9008 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
11:26:46:913  INFO 9008 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
11:26:46:956  INFO 9008 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 42 ms
11:26:48:270  INFO 9008 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
11:26:48:932  INFO 9008 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
11:26:48:957 DEBUG 9008 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
11:26:49:024 DEBUG 9008 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892777957263306754(Long)
11:26:49:077 DEBUG 9008 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
11:26:49:212 DEBUG 9008 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
11:26:49:217 DEBUG 9008 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892777971632975873(Long), 1892777957263306754(Long), 1892777971578449921(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T13:26:49.193177600(LocalDateTime)
11:26:49:225 DEBUG 9008 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
11:26:57:821  WARN 9008 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
11:26:57:821  WARN 9008 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
11:26:57:825  WARN 9008 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
11:26:57:829  WARN 9008 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
11:26:58:377  INFO 9008 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
11:26:58:395  INFO 9008 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
11:26:58:722  INFO 9008 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
11:26:58:722  INFO 9008 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@25aa8658[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
11:26:58:723  INFO 9008 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740108278921_10.35.140.159_55100
11:26:58:739  INFO 9008 --- [nacos-grpc-client-executor-47] c.a.n.c.remote.client.grpc.GrpcClient    : [1740108278921_10.35.140.159_55100]Ignore complete event,isRunning:false,isAbandon=false
11:26:58:753  INFO 9008 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@9dca8f7[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 48]
11:26:58:771  INFO 9008 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
11:26:58:829  INFO 9008 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
14:32:20:491  INFO 6736 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 6736 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
14:32:20:496 DEBUG 6736 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
14:32:20:497  INFO 6736 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
14:32:22:108  INFO 6736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
14:32:22:112  INFO 6736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:32:22:151  INFO 6736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
14:32:22:572  INFO 6736 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=93994f01-99a7-3ea8-acd7-1f6e9589b9eb
14:32:23:370  INFO 6736 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
14:32:23:385  INFO 6736 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:32:23:386  INFO 6736 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:32:23:614  INFO 6736 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:32:23:614  INFO 6736 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3038 ms
14:32:24:125  INFO 6736 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
14:32:24:539  INFO 6736 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
14:32:26:516  INFO 6736 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
14:32:27:357  INFO 6736 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
14:32:28:871  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of e791c0f0-a4cb-4788-bb67-150864b15671
14:32:29:203  INFO 6736 --- [main] org.reflections.Reflections              : Reflections took 284 ms to scan 1 urls, producing 3 keys and 6 values 
14:32:29:285  INFO 6736 --- [main] org.reflections.Reflections              : Reflections took 29 ms to scan 1 urls, producing 4 keys and 9 values 
14:32:29:336  INFO 6736 --- [main] org.reflections.Reflections              : Reflections took 35 ms to scan 1 urls, producing 3 keys and 10 values 
14:32:29:350  WARN 6736 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
14:32:29:372  INFO 6736 --- [main] org.reflections.Reflections              : Reflections took 20 ms to scan 1 urls, producing 1 keys and 5 values 
14:32:29:435  INFO 6736 --- [main] org.reflections.Reflections              : Reflections took 39 ms to scan 1 urls, producing 1 keys and 7 values 
14:32:29:469  INFO 6736 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 2 keys and 8 values 
14:32:29:478  WARN 6736 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
14:32:29:483  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] RpcClient init label, labels = {module=naming, source=sdk}
14:32:29:488  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
14:32:29:488  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
14:32:29:489  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
14:32:29:494  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
14:32:32:786  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740119564531_10.35.140.159_57220
14:32:32:788  INFO 6736 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Notify connected event to listeners.
14:32:32:788  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
14:32:32:789  INFO 6736 --- [main] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1234/0x0000000100872440
14:32:32:914  INFO 6736 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
14:32:32:980  INFO 6736 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
14:32:33:506  INFO 6736 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Receive server push request, request = NotifySubscriberRequest, requestId = 737
14:32:33:512  INFO 6736 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [e791c0f0-a4cb-4788-bb67-150864b15671] Ack server push request, request = NotifySubscriberRequest, requestId = 737
14:32:33:532  INFO 6736 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
14:32:33:539  INFO 6736 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
14:32:33:581  INFO 6736 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
14:32:33:816  INFO 6736 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 14.911 seconds (JVM running for 16.643)
14:42:34:781  WARN 6736 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
14:42:34:781  WARN 6736 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
14:42:34:808  WARN 6736 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
14:42:34:826  WARN 6736 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
14:42:36:152  INFO 6736 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
14:42:36:211  INFO 6736 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
14:42:36:539  INFO 6736 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
14:42:36:540  INFO 6736 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@55919c3d[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
14:42:36:542  INFO 6736 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740119564531_10.35.140.159_57220
14:42:36:573  INFO 6736 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@2af07bc[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 179]
14:42:41:799  INFO 17512 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 17512 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
14:42:41:802 DEBUG 17512 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
14:42:41:803  INFO 17512 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
14:42:43:394  INFO 17512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
14:42:43:398  INFO 17512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:42:43:438  INFO 17512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
14:42:43:886  INFO 17512 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=93994f01-99a7-3ea8-acd7-1f6e9589b9eb
14:42:44:729  INFO 17512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
14:42:44:748  INFO 17512 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:42:44:748  INFO 17512 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:42:44:968  INFO 17512 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:42:44:969  INFO 17512 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3099 ms
14:42:45:527  INFO 17512 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
14:42:45:886  INFO 17512 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
14:42:48:368  INFO 17512 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
14:42:49:728  INFO 17512 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
14:42:52:754  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 36b852fb-8ac2-4e62-a537-e67c9f5c7e82
14:42:52:897  INFO 17512 --- [main] org.reflections.Reflections              : Reflections took 76 ms to scan 1 urls, producing 3 keys and 6 values 
14:42:53:013  INFO 17512 --- [main] org.reflections.Reflections              : Reflections took 48 ms to scan 1 urls, producing 4 keys and 9 values 
14:42:53:047  INFO 17512 --- [main] org.reflections.Reflections              : Reflections took 21 ms to scan 1 urls, producing 3 keys and 10 values 
14:42:53:057  WARN 17512 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
14:42:53:084  INFO 17512 --- [main] org.reflections.Reflections              : Reflections took 24 ms to scan 1 urls, producing 1 keys and 5 values 
14:42:53:115  INFO 17512 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 1 keys and 7 values 
14:42:53:144  INFO 17512 --- [main] org.reflections.Reflections              : Reflections took 21 ms to scan 1 urls, producing 2 keys and 8 values 
14:42:53:149  WARN 17512 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
14:42:53:152  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] RpcClient init label, labels = {module=naming, source=sdk}
14:42:53:157  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
14:42:53:157  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
14:42:53:160  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
14:42:53:164  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
14:42:56:624  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740120188292_10.35.140.159_58121
14:42:56:627  INFO 17512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Notify connected event to listeners.
14:42:56:629  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
14:42:56:629  INFO 17512 --- [main] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1235/0x0000000100871840
14:42:56:844  INFO 17512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
14:42:56:882  INFO 17512 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
14:42:57:452  INFO 17512 --- [nacos-grpc-client-executor-11] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Receive server push request, request = NotifySubscriberRequest, requestId = 759
14:42:57:458  INFO 17512 --- [nacos-grpc-client-executor-11] com.alibaba.nacos.common.remote.client   : [36b852fb-8ac2-4e62-a537-e67c9f5c7e82] Ack server push request, request = NotifySubscriberRequest, requestId = 759
14:42:57:552  INFO 17512 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
14:42:57:558  INFO 17512 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
14:42:57:601  INFO 17512 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
14:42:57:803  INFO 17512 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 17.421 seconds (JVM running for 18.809)
14:48:07:695  INFO 17512 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
14:48:07:703  INFO 17512 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
14:48:07:848  INFO 17512 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 145 ms
14:48:09:147  INFO 17512 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
14:48:10:569  INFO 17512 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
14:48:10:591 DEBUG 17512 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
14:48:10:644 DEBUG 17512 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892828619791593473(Long)
14:48:10:729 DEBUG 17512 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
14:48:10:883 DEBUG 17512 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
14:48:10:888 DEBUG 17512 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892828645817237505(Long), 1892828619791593473(Long), 1892828645796265985(Long), 1(Long), balance(String), 35400(Integer), 5(Integer), 1(Integer), 2025-02-21T16:48:10.867486400(LocalDateTime)
14:48:10:965 DEBUG 17512 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
15:07:39:984  WARN 17512 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:07:39:984  WARN 17512 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:07:39:992  WARN 17512 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:07:40:007  WARN 17512 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:07:40:769  INFO 17512 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:07:40:857  INFO 17512 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:07:41:195  INFO 17512 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
15:07:41:196  INFO 17512 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@135b457e[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
15:07:41:197  INFO 17512 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740120188292_10.35.140.159_58121
15:07:41:230  INFO 17512 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@26fffa90[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 415]
15:07:41:241  INFO 17512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
15:07:41:990  INFO 17512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
15:07:57:141  INFO 21772 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 21772 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
15:07:57:145 DEBUG 21772 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
15:07:57:146  INFO 21772 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
15:07:58:933  INFO 21772 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
15:07:58:936  INFO 21772 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
15:07:58:982  INFO 21772 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
15:07:59:403  INFO 21772 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8e2d4e65-46e0-38a0-949c-d53bf303660c
15:08:00:529  INFO 21772 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
15:08:00:550  INFO 21772 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
15:08:00:550  INFO 21772 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
15:08:00:806  INFO 21772 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
15:08:00:806  INFO 21772 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3575 ms
15:08:01:263  INFO 21772 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
15:08:01:724  INFO 21772 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
15:08:03:206  INFO 21772 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
15:08:04:219  INFO 21772 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
15:08:05:668  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 0fdde952-bae0-4641-890c-118c1fe489ba
15:08:05:781  INFO 21772 --- [main] org.reflections.Reflections              : Reflections took 49 ms to scan 1 urls, producing 3 keys and 6 values 
15:08:05:840  INFO 21772 --- [main] org.reflections.Reflections              : Reflections took 18 ms to scan 1 urls, producing 4 keys and 9 values 
15:08:05:864  INFO 21772 --- [main] org.reflections.Reflections              : Reflections took 20 ms to scan 1 urls, producing 3 keys and 10 values 
15:08:05:869  WARN 21772 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:08:05:882  INFO 21772 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 1 keys and 5 values 
15:08:05:898  INFO 21772 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 1 keys and 7 values 
15:08:05:913  INFO 21772 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 2 keys and 8 values 
15:08:05:917  WARN 21772 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:08:05:918  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] RpcClient init label, labels = {module=naming, source=sdk}
15:08:05:921  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
15:08:05:921  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
15:08:05:923  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
15:08:05:924  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
15:08:07:809  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740121699564_10.35.140.159_60652
15:08:07:810  INFO 21772 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Notify connected event to listeners.
15:08:07:813  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
15:08:07:816  INFO 21772 --- [main] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1230/0x0000000100873c40
15:08:07:913  INFO 21772 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
15:08:07:985  INFO 21772 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
15:08:08:632  INFO 21772 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
15:08:08:637  INFO 21772 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Receive server push request, request = NotifySubscriberRequest, requestId = 772
15:08:08:638  INFO 21772 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
15:08:08:640  INFO 21772 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Ack server push request, request = NotifySubscriberRequest, requestId = 772
15:08:08:672  INFO 21772 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
15:08:08:818  INFO 21772 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 13.021 seconds (JVM running for 14.596)
15:09:24:167  INFO 21772 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
15:09:24:168  INFO 21772 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
15:09:24:171  INFO 21772 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
15:09:24:557  INFO 21772 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
15:09:25:588  INFO 21772 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
15:09:25:614 DEBUG 21772 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
15:09:25:673 DEBUG 21772 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892833978581184513(Long)
15:09:25:748 DEBUG 21772 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
15:09:25:913 DEBUG 21772 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
15:09:25:922 DEBUG 21772 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892833993697456129(Long), 1892833978581184513(Long), 1892833993663901697(Long), 1(Long), balance(String), 35400(Integer), 5(Integer), 1(Integer), 2025-02-21T17:09:25.897165100(LocalDateTime)
15:09:25:979 DEBUG 21772 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
15:09:28:728 DEBUG 21772 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
15:09:28:729 DEBUG 21772 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892833993697456129(Long)
15:09:28:860 DEBUG 21772 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
15:09:28:870 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=35400 HTTP/1.1
15:09:28:871 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
15:09:28:871 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
15:09:29:758  INFO 21772 --- [nacos-grpc-client-executor-36] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Receive server push request, request = NotifySubscriberRequest, requestId = 774
15:09:29:759  INFO 21772 --- [nacos-grpc-client-executor-36] com.alibaba.nacos.common.remote.client   : [0fdde952-bae0-4641-890c-118c1fe489ba] Ack server push request, request = NotifySubscriberRequest, requestId = 774
15:09:30:567 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (1695ms)
15:09:30:568 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
15:09:30:568 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
15:09:30:569 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 07:09:30 GMT
15:09:30:569 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
15:09:30:570 DEBUG 21772 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
15:09:30:593 DEBUG 21772 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
15:09:30:600 DEBUG 21772 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2025-02-21T15:09:30.570529600(LocalDateTime), 1892833993697456129(Long), 0(Integer), 1(Integer)
15:09:30:607 DEBUG 21772 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
15:09:30:611  INFO 21772 --- [http-nio-8084-exec-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.150.101:5672]
15:09:51:660 ERROR 21772 --- [http-nio-8084-exec-2] c.h.p.service.Impl.PayOrderServiceImpl   : 支付成功的消息发送失败，支付单id：1892833993697456129， 交易单id：1892833978581184513

org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection timed out: connect
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:61) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:603) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:725) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:252) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2210) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2183) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.send(RabbitTemplate.java:1102) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1167) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1160) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:72) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$da77109f.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.base/java.net.PlainSocketImpl.waitForConnect(Native Method) ~[na:na]
	at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:107) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:412) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:255) ~[na:na]
	at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:237) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:na]
	at java.base/java.net.Socket.connect(Socket.java:608) ~[na:na]
	at com.rabbitmq.client.impl.SocketFrameHandlerFactory.create(SocketFrameHandlerFactory.java:60) ~[amqp-client-5.14.2.jar:5.14.2]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1223) ~[amqp-client-5.14.2.jar:5.14.2]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1173) ~[amqp-client-5.14.2.jar:5.14.2]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:641) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:616) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:566) ~[spring-rabbit-2.4.12.jar:2.4.12]
	... 71 common frames omitted

15:12:32:274  WARN 21772 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:12:32:274  WARN 21772 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:12:32:274  WARN 21772 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:12:32:279  WARN 21772 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:12:32:974  INFO 21772 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:12:33:031  INFO 21772 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:12:33:367  INFO 21772 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
15:12:33:367  INFO 21772 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@fee78d3[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
15:12:33:368  INFO 21772 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740121699564_10.35.140.159_60652
15:12:33:391  INFO 21772 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@433ae47f[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 94]
15:12:33:398  INFO 21772 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
15:12:34:604  INFO 21772 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
15:12:41:145  INFO 21820 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 21820 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
15:12:41:150 DEBUG 21820 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
15:12:41:151  INFO 21820 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
15:12:43:045  INFO 21820 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
15:12:43:048  INFO 21820 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
15:12:43:085  INFO 21820 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
15:12:43:525  INFO 21820 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8e2d4e65-46e0-38a0-949c-d53bf303660c
15:12:44:380  INFO 21820 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
15:12:44:401  INFO 21820 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
15:12:44:402  INFO 21820 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
15:12:44:651  INFO 21820 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
15:12:44:651  INFO 21820 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3420 ms
15:12:45:214  INFO 21820 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
15:12:45:661  INFO 21820 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
15:12:47:209  INFO 21820 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
15:12:48:202  INFO 21820 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
15:12:50:251  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 2f925719-b206-4bfb-98b2-80dbbed441d1
15:12:50:324  INFO 21820 --- [main] org.reflections.Reflections              : Reflections took 45 ms to scan 1 urls, producing 3 keys and 6 values 
15:12:50:369  INFO 21820 --- [main] org.reflections.Reflections              : Reflections took 20 ms to scan 1 urls, producing 4 keys and 9 values 
15:12:50:389  INFO 21820 --- [main] org.reflections.Reflections              : Reflections took 15 ms to scan 1 urls, producing 3 keys and 10 values 
15:12:50:395  WARN 21820 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:12:50:408  INFO 21820 --- [main] org.reflections.Reflections              : Reflections took 13 ms to scan 1 urls, producing 1 keys and 5 values 
15:12:50:426  INFO 21820 --- [main] org.reflections.Reflections              : Reflections took 14 ms to scan 1 urls, producing 1 keys and 7 values 
15:12:50:441  INFO 21820 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 2 keys and 8 values 
15:12:50:445  WARN 21820 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:12:50:446  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] RpcClient init label, labels = {module=naming, source=sdk}
15:12:50:450  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
15:12:50:450  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
15:12:50:451  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
15:12:50:455  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
15:12:52:500  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740121984207_10.35.140.159_61265
15:12:52:502  INFO 21820 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Notify connected event to listeners.
15:12:52:503  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
15:12:52:505  INFO 21820 --- [main] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1230/0x0000000100873c40
15:12:52:663  INFO 21820 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
15:12:52:735  INFO 21820 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
15:12:53:134  INFO 21820 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
15:12:53:141  INFO 21820 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
15:12:53:200  INFO 21820 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Receive server push request, request = NotifySubscriberRequest, requestId = 779
15:12:53:205  INFO 21820 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
15:12:53:206  INFO 21820 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [2f925719-b206-4bfb-98b2-80dbbed441d1] Ack server push request, request = NotifySubscriberRequest, requestId = 779
15:12:53:356  INFO 21820 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 13.693 seconds (JVM running for 15.421)
15:13:14:162  INFO 21820 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
15:13:14:162  INFO 21820 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
15:13:14:164  INFO 21820 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
15:13:14:424  INFO 21820 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
15:13:16:319  INFO 21820 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
15:13:16:648 DEBUG 21820 --- [http-nio-8084-exec-1] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
15:13:16:705 DEBUG 21820 --- [http-nio-8084-exec-1] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892833993697456129(Long)
15:13:16:799 DEBUG 21820 --- [http-nio-8084-exec-1] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
15:13:16:892 ERROR 21820 --- [http-nio-8084-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.hmall.common.exception.BizIllegalException: 交易已支付或关闭！] with root cause

com.hmall.common.exception.BizIllegalException: 交易已支付或关闭！
	at com.hmall.pay.service.Impl.PayOrderServiceImpl.tryPayOrderByBalance(PayOrderServiceImpl.java:60) ~[classes/:na]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$FastClassBySpringCGLIB$$31d4529f.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.pay.service.Impl.PayOrderServiceImpl$$EnhancerBySpringCGLIB$$437a4cce.tryPayOrderByBalance(<generated>) ~[classes/:na]
	at com.hmall.pay.controller.PayController.tryPayOrderByBalance(PayController.java:41) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

15:20:58:824  WARN 21820 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:20:58:824  WARN 21820 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:20:58:853  WARN 21820 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:20:58:862  WARN 21820 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:20:59:981  INFO 21820 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:21:00:076  INFO 21820 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:21:00:407  INFO 21820 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
15:21:00:409  INFO 21820 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@297449ee[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
15:21:00:409  INFO 21820 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740121984207_10.35.140.159_61265
15:21:00:433  INFO 21820 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@da287d4[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 147]
15:21:00:452  INFO 21820 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
15:21:01:689  INFO 21820 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
15:47:09:501  INFO 9252 --- [main] com.hmall.pay.PayServiceApplication      : Starting PayServiceApplication using Java 11.0.24 on DESKTOP-4M9GEQC with PID 9252 (D:\code\hmall\pay-service\target\classes started by LiRui in D:\code\hmall)
15:47:09:504 DEBUG 9252 --- [main] com.hmall.pay.PayServiceApplication      : Running with Spring Boot v2.7.12, Spring v5.3.27
15:47:09:505  INFO 9252 --- [main] com.hmall.pay.PayServiceApplication      : The following 1 profile is active: "local"
15:47:11:722  INFO 9252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
15:47:11:729  INFO 9252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
15:47:11:773  INFO 9252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
15:47:12:451  INFO 9252 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8e2d4e65-46e0-38a0-949c-d53bf303660c
15:47:13:484  INFO 9252 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8084 (http)
15:47:13:501  INFO 9252 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
15:47:13:502  INFO 9252 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
15:47:13:754  INFO 9252 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
15:47:13:755  INFO 9252 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4150 ms
15:47:14:287  INFO 9252 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
15:47:14:949  INFO 9252 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
15:47:17:230  INFO 9252 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
15:47:18:462  INFO 9252 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
15:47:20:538  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 17e717bb-3766-4a14-8cbd-5a1308c8b0e7
15:47:20:656  INFO 9252 --- [main] org.reflections.Reflections              : Reflections took 65 ms to scan 1 urls, producing 3 keys and 6 values 
15:47:20:731  INFO 9252 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 4 keys and 9 values 
15:47:20:760  INFO 9252 --- [main] org.reflections.Reflections              : Reflections took 20 ms to scan 1 urls, producing 3 keys and 10 values 
15:47:20:769  WARN 9252 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:47:20:794  INFO 9252 --- [main] org.reflections.Reflections              : Reflections took 22 ms to scan 1 urls, producing 1 keys and 5 values 
15:47:20:830  INFO 9252 --- [main] org.reflections.Reflections              : Reflections took 28 ms to scan 1 urls, producing 1 keys and 7 values 
15:47:20:855  INFO 9252 --- [main] org.reflections.Reflections              : Reflections took 19 ms to scan 1 urls, producing 2 keys and 8 values 
15:47:20:860  WARN 9252 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:47:20:862  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] RpcClient init label, labels = {module=naming, source=sdk}
15:47:20:868  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
15:47:20:868  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
15:47:20:869  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
15:47:20:873  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Try to connect to server on start up, server: {serverIp = '10.41.5.44', server main port = 8848}
15:47:24:258  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Success to connect to server [10.41.5.44:8848] on start up, connectionId = 1740124055783_10.35.140.159_62878
15:47:24:261  INFO 9252 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Notify connected event to listeners.
15:47:24:264  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
15:47:24:265  INFO 9252 --- [main] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1231/0x000000010087b840
15:47:24:532  INFO 9252 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8084 (http) with context path ''
15:47:24:874  INFO 9252 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.35.140.159:8084 register finished
15:47:24:998  INFO 9252 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Receive server push request, request = NotifySubscriberRequest, requestId = 809
15:47:25:005  INFO 9252 --- [nacos-grpc-client-executor-10] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Ack server push request, request = NotifySubscriberRequest, requestId = 809
15:47:25:483  INFO 9252 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
15:47:25:490  INFO 9252 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
15:47:25:536  INFO 9252 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
15:47:25:743  INFO 9252 --- [main] com.hmall.pay.PayServiceApplication      : Started PayServiceApplication in 18.033 seconds (JVM running for 20.032)
15:48:30:907  INFO 9252 --- [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
15:48:30:907  INFO 9252 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
15:48:30:910  INFO 9252 --- [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
15:48:31:365  INFO 9252 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
15:48:32:553  INFO 9252 --- [http-nio-8084-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
15:48:32:561 DEBUG 9252 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
15:48:32:585 DEBUG 9252 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892843822964936706(Long)
15:48:32:660 DEBUG 9252 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
15:48:32:718 DEBUG 9252 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
15:48:32:722 DEBUG 9252 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892843836902711298(Long), 1892843822964936706(Long), 1892843836902711297(Long), 1(Long), balance(String), 35400(Integer), 5(Integer), 1(Integer), 2025-02-21T17:48:32.709740100(LocalDateTime)
15:48:32:849 DEBUG 9252 --- [http-nio-8084-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
15:56:32:786 DEBUG 9252 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
15:56:32:791 DEBUG 9252 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892845841805086721(Long)
15:56:32:800 DEBUG 9252 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
15:56:32:808 DEBUG 9252 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
15:56:32:810 DEBUG 9252 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892845850558701570(Long), 1892845841805086721(Long), 1892845850558701569(Long), 1(Long), balance(String), 35400(Integer), 5(Integer), 1(Integer), 2025-02-21T17:56:32.806176800(LocalDateTime)
15:56:32:818 DEBUG 9252 --- [http-nio-8084-exec-4] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
15:56:38:047 DEBUG 9252 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
15:56:38:047 DEBUG 9252 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892845850558701570(Long)
15:56:38:063 DEBUG 9252 --- [http-nio-8084-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
15:56:38:089 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=35400 HTTP/1.1
15:56:38:089 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
15:56:38:089 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
15:56:38:886  INFO 9252 --- [nacos-grpc-client-executor-178] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Receive server push request, request = NotifySubscriberRequest, requestId = 823
15:56:38:886  INFO 9252 --- [nacos-grpc-client-executor-178] com.alibaba.nacos.common.remote.client   : [17e717bb-3766-4a14-8cbd-5a1308c8b0e7] Ack server push request, request = NotifySubscriberRequest, requestId = 823
15:56:38:966 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (874ms)
15:56:38:966 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
15:56:38:967 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
15:56:38:967 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 07:56:38 GMT
15:56:38:967 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
15:56:38:967 DEBUG 9252 --- [http-nio-8084-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
15:56:38:982 DEBUG 9252 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
15:56:38:985 DEBUG 9252 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2025-02-21T15:56:38.967252700(LocalDateTime), 1892845850558701570(Long), 0(Integer), 1(Integer)
15:56:38:991 DEBUG 9252 --- [http-nio-8084-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
15:56:39:010  INFO 9252 --- [http-nio-8084-exec-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [10.41.5.44:5672]
15:56:39:098  INFO 9252 --- [http-nio-8084-exec-2] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#e8c84eb:0/SimpleConnection@cc0b83e [delegate=amqp://hmall@10.41.5.44:5672//hmall, localPort= 63992]
15:57:45:112 DEBUG 9252 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
15:57:45:113 DEBUG 9252 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1892846151839649794(Long)
15:57:45:117 DEBUG 9252 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
15:57:45:120 DEBUG 9252 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
15:57:45:121 DEBUG 9252 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1892846153819463682(Long), 1892846151839649794(Long), 1892846153819463681(Long), 1(Long), balance(String), 224900(Integer), 5(Integer), 1(Integer), 2025-02-21T17:57:45.118425200(LocalDateTime)
15:57:45:131 DEBUG 9252 --- [http-nio-8084-exec-3] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
15:57:49:453 DEBUG 9252 --- [http-nio-8084-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
15:57:49:455 DEBUG 9252 --- [http-nio-8084-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1892846153819463682(Long)
15:57:49:461 DEBUG 9252 --- [http-nio-8084-exec-6] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
15:57:49:462 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=224900 HTTP/1.1
15:57:49:462 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
15:57:49:462 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
15:57:49:753 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (290ms)
15:57:49:753 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
15:57:49:753 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
15:57:49:753 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Fri, 21 Feb 2025 07:57:49 GMT
15:57:49:753 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
15:57:49:753 DEBUG 9252 --- [http-nio-8084-exec-6] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
15:57:49:759 DEBUG 9252 --- [http-nio-8084-exec-6] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
15:57:49:761 DEBUG 9252 --- [http-nio-8084-exec-6] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2025-02-21T15:57:49.754684500(LocalDateTime), 1892846153819463682(Long), 0(Integer), 1(Integer)
15:57:49:784 DEBUG 9252 --- [http-nio-8084-exec-6] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
15:59:34:898  WARN 9252 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:59:34:898  WARN 9252 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:59:34:899  WARN 9252 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:59:34:902  WARN 9252 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:59:35:423  INFO 9252 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:59:35:490  INFO 9252 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:59:35:822  INFO 9252 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
15:59:35:823  INFO 9252 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@7982dcbc[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
15:59:35:823  INFO 9252 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1740124055783_10.35.140.159_62878
15:59:35:828  INFO 9252 --- [nacos-grpc-client-executor-230] c.a.n.c.remote.client.grpc.GrpcClient    : [1740124055783_10.35.140.159_62878]Ignore complete event,isRunning:false,isAbandon=false
15:59:35:841  INFO 9252 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3e0375bc[Running, pool size = 11, active threads = 0, queued tasks = 0, completed tasks = 231]
15:59:35:852  INFO 9252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
15:59:35:934  INFO 9252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
